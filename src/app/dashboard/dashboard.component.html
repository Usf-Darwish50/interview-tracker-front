<div class="dashboard-actions">
  <button class="btn-primary small" routerLink="/add-candidate">
    Add Candidate
  </button>
  <button class="btn-primary small" (click)="onAddProcessClick()">
    Add Process
  </button>
</div>

@if (showAddProcessDialog) {
<app-add-process
  [managerId]="managerId"
  (closeDialog)="showAddProcessDialog = false"
  (processCreated)="onProcessCreated()"
>
</app-add-process>
}

<div class="dashboard-content">
  <div class="dashboard-section">
    <div class="section-card">
      <h2 class="section-title">Process Distribution</h2>
      <div class="chart-container">
        <div class="donut-chart">
          <svg viewBox="0 0 200 200" class="chart-svg">
            <circle
              cx="100"
              cy="100"
              r="80"
              fill="none"
              stroke="#10b981"
              stroke-width="20"
              stroke-dasharray="226 504"
              stroke-dashoffset="0"
              transform="rotate(-90 100 100)"
            />
            <circle
              cx="100"
              cy="100"
              r="80"
              fill="none"
              stroke="#3b82f6"
              stroke-width="20"
              stroke-dasharray="176 504"
              stroke-dashoffset="-226"
              transform="rotate(-90 100 100)"
            />
            <circle
              cx="100"
              cy="100"
              r="80"
              fill="none"
              stroke="#ef4444"
              stroke-width="20"
              stroke-dasharray="101 504"
              stroke-dashoffset="-402"
              transform="rotate(-90 100 100)"
            />
          </svg>
        </div>
        <div class="chart-legend">
          <div class="legend-item">
            <div class="legend-color completed"></div>
            <span>Completed ({{ processDistribution.completed }}%)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color in-progress"></div>
            <span>In Progress ({{ processDistribution.inProgress }}%)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color cancelled"></div>
            <span>Cancelled ({{ processDistribution.cancelled }}%)</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard-section">
    <div class="section-header">
      <h2 class="section-title">Active Processes</h2>
      <div class="section-actions">
        <button class="nav-btn" aria-label="Previous">
          <svg class="icon" viewBox="0 0 24 24">
            <polyline points="15,18 9,12 15,6"></polyline>
          </svg>
        </button>
        <button class="nav-btn" aria-label="Next">
          <svg class="icon" viewBox="0 0 24 24">
            <polyline points="9,18 15,12 9,6"></polyline>
          </svg>
        </button>
      </div>
    </div>

    <div class="processes-grid">
      @for (process of activeProcesses; track process.id) {
      <div class="process-card" [class]="process.statusClass">
        <div class="card-header">
          <h3 class="process-title">{{ process.title }}</h3>
          <span class="candidate-count"
            >{{ process.candidateCount }} Candidates</span
          >
        </div>
        <div class="card-body">
          <span class="process-status" [class]="process.statusClass">{{
            process.status
          }}</span>
        </div>
        <div class="card-footer">
          <button class="view-process-btn">View Process</button>
        </div>
      </div>
      }
    </div>
  </div>
</div>
